{
  "bsonType": "object",
  "required": ["name", "user_id", "createTime", "updateTime"],
  "permission": {
    "read": "doc.user_id == auth.uid",
    "create": "auth.uid != null",
    "update": "doc.user_id == auth.uid",
    "delete": "doc.user_id == auth.uid"
  },
  "properties": {
    "_id": {
      "description": "ID，系统自动生成"
    },
    "name": {
      "bsonType": "string",
      "title": "工人姓名",
      "description": "工人姓名",
      "trim": "both"
    },
    "phone": {
      "bsonType": "string",
      "title": "联系电话",
      "description": "联系电话",
      "trim": "both",
      "pattern": "^$|^1[3-9]\\d{9}$",
      "errorMessage": {
        "pattern": "手机号码格式不正确"
      }
    },
    "remark": {
      "bsonType": "string",
      "title": "备注",
      "description": "备注信息",
      "trim": "both"
    },
    "user_id": {
      "bsonType": "string",
      "title": "创建者用户ID",
      "description": "创建者用户ID",
      "foreignKey": "uni-id-users._id"
    },
    "createTime": {
      "bsonType": "timestamp",
      "title": "创建时间",
      "description": "创建时间",
      "defaultValue": {
        "$env": "now"
      }
    },
    "updateTime": {
      "bsonType": "timestamp",
      "title": "更新时间",
      "description": "更新时间",
      "defaultValue": {
        "$env": "now"
      }
    }
  },
  "index": [{
    "IndexName": "user_id_index",
    "MgoKeySchema": {
      "MgoIndexKeys": [{
        "Name": "user_id",
        "Direction": "1"
      }]
    }
  }, {
    "IndexName": "user_id_name_index",
    "MgoKeySchema": {
      "MgoIndexKeys": [{
        "Name": "user_id",
        "Direction": "1"
      }, {
        "Name": "name",
        "Direction": "1"
      }]
    }
  }]
} 