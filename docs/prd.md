# 轻量级记工时小程序 - 核心需求说明

## 1. 背景与目标

**痛点：** 传统纸质记工时易丢失、损坏，手工计算效率低、易出错，年底结算易引发争议。
**目标：** 开发一款简洁易用的微信小程序，帮助包工头电子化管理工人工时，提升记录和统计效率，提高数据准确性，减少管理成本和结算纠纷。

## 2. 主要功能

- **工地管理 (Site Management)**

  - **查看工地列表：** 集中展示所有已创建的工地名称。
  - **新增工地：** 录入工地名称（必填），可选填地址、备注等信息。
  - **编辑工地：** 修改已存在的工地信息（名称、地址、备注等）。
  - **删除工地：** 移除不再需要的工地（需二次确认，关联的工时记录处理方式需明确，建议保留历史记录或明确告知用户风险）。
  - **工地详情：** 查看单个工地的详细信息，并作为该工地相关操作的入口。
    - **添加工人至工地：** 从全局工人列表中选择工人，将其关联到当前工地，方便后续为他们记工时。
    - **从工地移除工人：** 将工人与当前工地解除关联（不删除全局工人信息及历史工时）。

- **工人管理 (Worker Management)**

  - **工人列表：** 集中展示所有工人姓名，支持按姓名搜索。
  - **新增工人：** 录入工人姓名（必填），可选填联系电话、备注等信息。工人信息全局唯一。
  - **编辑工人：** 修改已存在的工人信息（姓名、电话、备注等）。
  - **删除工人：** 彻底移除工人及其所有相关工时记录（需强二次确认，明确告知数据将永久丢失）。

- **工时记录 (Work Hour Logging)**

  - **发起记录：** 通常从特定工地详情页发起，自动关联该工地。
  - **选择工人：** 在当前工地关联的工人列表中，选择一个或多个工人进行工时记录。
  - **选择日期：** 使用日历控件选择需要记录工时的日期，默认为当天。
  - **选择单位与输入数量：** 选择工时单位是“按天”还是“按小时”，并输入对应的数字（支持小数，如 0.5 天）。若为批量记录，需要考虑是统一输入还是逐个输入。
  - **保存记录：** 将所选工人、日期、工时单位和数量，按照工人维度保存为一条或多条工时记录。同一工人在不同工地的记录是独立的。
  - **查看工时记录列表：** 按时间倒序列出所有工时记录，包含工人、工地、日期、工时（数量及单位）。支持按工地、工人、日期范围进行筛选查看。
  - **修改工时记录：** 对已保存的单条工时记录进行信息编辑（如修改工时数量、单位或日期）。
  - **删除工时记录：** 删除错误的或不再需要的单条工时记录（需二次确认）。

- **工时统计 (Work Hour Statistics)**
  - **设置筛选条件：** 提供筛选器，允许用户选择：
    - **工地范围：** 全部工地 或 指定单个工地。
    - **工人范围：** 全部工人 或 指定单个工人（选择工地后，工人范围应联动更新为该工地的工人）。
    - **时间范围：** 选择统计的开始日期和结束日期。
  - **执行统计查询：** 根据用户设置的筛选条件，从所有工时记录中检索并计算。
  - **展示统计结果：** 清晰地列表展示统计结果。通常按工人维度汇总，列出每个工人在指定时间范围和工地范围内的总工时。

## 3. 界面与体验要求

- **UI 组件库：** 必须使用 **uView UI** 组件库进行开发。
- **设计风格：**
  - 界面设计严格遵循 **uView UI** 的官方设计规范，保持简洁、直观、清爽的视觉风格。
  - 色彩、字体、间距、图标等元素应与 uView UI 风格保持一致。
- **交互体验：**
  - 操作流程简单明了，减少不必要的跳转。
  - 常用操作（如记工时、查看统计）应易于访问。
  - 列表、表单、选择器、提示反馈等组件优先使用 uView 提供的标准组件。
  - 确保在手机端有良好的显示效果和操作体验。
